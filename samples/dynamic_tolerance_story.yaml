operations:

  - operation: CREATE_ASSET
    to_print: Create new EV Pump with id 1.
    asset_id: ev pump 1
    behaviours: 
      - RecordEvidence
    attributes:
      ev_pump: "true"


  # create some policies
  - operation: CREATE_COMPLIANCE_POLICY
    to_print: Create a compliance policy that checks an EV pump maintainance requests are serviced within a reasonable time frame.
    policy_id: ev maintainance policy 1
    description: ev maintainance policy
    display_name: ev maintainance policy
    policy_type: COMPLIANCE_DYNAMIC_TOLERANCE
    asset_filter:
      - or:
        - attributes.ev_pump=true
    event_display_type: Maintenance Requested
    closing_event_display_type:  Maintenance Performed
    dynamic_window: 700 # a large window
    dynamic_variability: 1.5 # 150%  tolerance from the stddev away from the mean

  # setup the ev pump to have maintainance requests and servicings

  - operation: CREATE_EVENT
    to_print: Create Event requesting EV pump 1 needs maintainance.
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 1"
      arc_description: request maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Requested

  - operation: CREATE_EVENT
    to_print: Create Event after 1 seconds, for EV pump 1, stating maintainance occured.
    wait_time: 1
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 1"
      arc_description: perform maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Performed

  - operation: CREATE_EVENT
    to_print: Create Event requesting EV pump 1 needs maintainance.
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 2"
      arc_description: request maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Requested

  - operation: CREATE_EVENT
    to_print: Create Event after 2 seconds, for EV pump 1, stating maintainance occured.
    wait_time: 2
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 2"
      arc_description: perform maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Performed

  - operation: CREATE_EVENT
    to_print: Create Event requesting EV pump 1 needs maintainance.
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 3"
      arc_description: request maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Requested

  - operation: CREATE_EVENT
    to_print: Create Event after 3 seconds, for EV pump 1, stating maintainance occured.
    wait_time: 3
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 3"
      arc_description: perform maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Performed

  # check compliance for ev pump
  - operation: CHECK_COMPLIANCE
    to_print: Check Compliance of EV pump 1.
    asset_id: ev pump 1

  # now create an event that throws the Standard deviation out of whack

  - operation: CREATE_EVENT
    to_print: Create Event requesting EV pump 1 needs maintainance.
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 4"
      arc_description: request maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Requested

  - operation: CREATE_EVENT
    to_print: Create Event after 7 seconds, for EV pump 1, stating maintainance occured.
    wait_time: 20
    asset_id: ev pump 1
    properties:
      operation: Record
      behaviour: RecordEvidence
    attributes:
      arc_correlation_value: "EV Maintenance 4"
      arc_description: perform maintenance
      arc_evidence: see attached report
      arc_display_type: Maintenance Performed

  # check compliance for ev pump
  - operation: CHECK_COMPLIANCE
    to_print: Check Compliance of EV pump 1.
    asset_id: ev pump 1